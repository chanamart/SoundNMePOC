function run(e,r,t,o){o.currentUser&&(r.defaults.headers.common.Authorization=o.currentUser.token)}run.$inject=["$rootScope","$http","$location","$localStorage"];var app=angular.module("toofix",["ui.router","ngAnimate","ui.bootstrap","states","HomeController","HomeDirective","WelcomeController","WelcomeDirective","WelcomeService","CreateController","CreateDirective","CreateService","JoinController","JoinDirective","CreclubController","CreclubDirective","CreclubService","PersoController","PersoDirective","MenuController","MenuDirective","LoginController","LoginDirective","LoginService","RegisterController","RegisterDirective","RegisterService","WaitController","WaitDirective","WaitService","ngStorage","constants"]).run(run),app=angular.module("constants",[]);app.constant("apiUrl","https://toofix.gheberg.eu/api"),app.constant("languages",["fr"]),angular.module("states",[]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,r,t){t.html5Mode({enabled:!0,requireBase:!1}),e.state("home",{url:"/",templateUrl:"/views/home/home.html"}).state("register",{url:"/register",templateUrl:"/views/register/register.html"}).state("login",{url:"/login",templateUrl:"/views/login/login.html"}).state("welcome",{url:"/welcome",templateUrl:"/views/welcome/welcome.html"}).state("join",{url:"/join",templateUrl:"/views/joinleague/join.html"}).state("perso",{url:"/perso",templateUrl:"/views/perso/perso.html"}).state("wait",{url:"/wait",templateUrl:"/views/wait/wait.html"}).state("creclub",{url:"/creclub",templateUrl:"/views/createclub/creclub.html"}).state("create",{url:"/create",templateUrl:"/views/createleague/create.html"}),r.otherwise("/error")}]);var app=angular.module("CreclubController",[]);app.controller("CreclubCtrl",["$state","$scope","$http","$localStorage","CreclubSrv",function(e,r,t,o,l){}]);var app=angular.module("CreclubDirective",[]);app.directive("creclubDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/createclub/creclub.directive.html",controller:"CreclubCtrl",controllerAs:"vm",bindToController:!0}}),angular.module("CreclubService",[]).factory("CreclubSrv",["$http","apiUrl",function(e,r){return{}}]);var app=angular.module("CreateController",[]);app.controller("CreateCtrl",["$state","$http","$localStorage","CreateSrv",function(e,r,t,o){var l=this;l.select=function(e){l.number=e},l.validate=function(){var r={name:l.league,nbPlayers:l.number,owner:t.currentUser._id,playerName:t.currentUser.name,playerSurname:t.currentUser.surname};o.create(r).then(function(t){l.response=t;var n={_id:t.data._id,name:r.name};o.add(r.owner,n).then(function(r){e.go("welcome")},function(e){})},function(e){})}}]);var app=angular.module("CreateDirective",[]);app.directive("createDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/createleague/create.directive.html",controller:"CreateCtrl",controllerAs:"vm",bindToController:!0}}),angular.module("CreateService",[]).factory("CreateSrv",["$http","apiUrl",function(e,r){return{create:function(t){return e.post(r+"/ligues",t)},add:function(t,o){return e.post(r+"/users/"+t+"/ligues",o)}}}]);var app=angular.module("HomeController",[]);app.controller("HomeCtrl",["$state",function(e){var r=this;r.register=function(){e.go("register")},r.login=function(){e.go("login")}}]);var app=angular.module("HomeDirective",[]);app.directive("homeDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/home/home.directive.html",controller:"HomeCtrl",controllerAs:"vm",bindToController:!0}});var app=angular.module("JoinController",[]);app.controller("JoinCtrl",["$state",function(e){}]);var app=angular.module("JoinDirective",[]);app.directive("joinDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/joinleague/join.directive.html",controller:"JoinCtrl",controllerAs:"vm",bindToController:!0}});var app=angular.module("LoginController",[]);app.controller("LoginCtrl",["$state","$scope","$http","$localStorage","LoginSrv",function(e,r,t,o,l){var n=this;n.validate=function(){n.data={email:n.email,password:n.password},l.post(n.data).then(function(r){n.response=r,r.data.success===!1?n.error=r.data.message:(t.defaults.headers.common.Authorization=r.data.token,o.currentUser=r.data.user,o.currentUser.token=r.data.token,e.go("welcome"))},function(e){})},n.create=function(){e.go("register")},n.reset=function(){e.go("reset")}}]);var app=angular.module("LoginDirective",[]);app.directive("loginDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/login/login.directive.html",controller:"LoginCtrl",controllerAs:"vm",bindToController:!0}}),angular.module("LoginService",[]).factory("LoginSrv",["$http","apiUrl",function(e,r){return{post:function(t){return e.post(r+"/authentificate",t)}}}]);var app=angular.module("MenuController",[]);app.controller("MenuCtrl",["$state","$scope",function(e,r){}]);var app=angular.module("MenuDirective",[]);app.directive("menuDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/menu/menu.directive.html",controller:"MenuCtrl",controllerAs:"vm",bindToController:!0}});var app=angular.module("PersoController",[]);app.controller("PersoCtrl",["$state","$scope","$http","$localStorage",function(e,r,t,o){vm=this,vm.name=o.currentUser.name,vm.surname=o.currentUser.surname,vm.email=o.currentUser.email,vm.pseudo=o.currentUser.pseudo}]);var app=angular.module("PersoDirective",[]);app.directive("persoDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/perso/perso.directive.html",controller:"PersoCtrl",controllerAs:"vm",bindToController:!0}});var app=angular.module("RegisterController",[]);app.controller("RegisterCtrl",["$state","$scope","RegisterSrv",function(e,r,t){var o=this;o.validate=function(){o.data={surname:o.surname,name:o.name,email:o.email,password:o.password},t.post(o.data).then(function(e){o.response=e},function(e){o.error=e})}}]);var app=angular.module("RegisterDirective",[]);app.directive("registerDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/register/register.directive.html",controller:"RegisterCtrl",controllerAs:"vm",bindToController:!0}}),angular.module("RegisterService",[]).factory("RegisterSrv",["$http","apiUrl",function(e,r){return{post:function(t){return e.post(r+"/users/",t)}}}]);var app=angular.module("WaitController",[]);app.controller("WaitCtrl",["$state","$scope","$http","$stateParams","$localStorage","WaitSrv",function(e,r,t,o,l,n){var a=this;a.league=l.currentLeague,n.getleague(a.league.id).then(function(e){a.response=e,a.lack=e.data.nbPlayers-e.data.participants.length},function(e){a.response=e})}]);var app=angular.module("WaitDirective",[]);app.directive("waitDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/wait/wait.directive.html",controller:"WaitCtrl",controllerAs:"vm",bindToController:!0}}),angular.module("WaitService",[]).factory("WaitSrv",["$http","apiUrl",function(e,r){return{getleague:function(t){return e.get(r+"/ligues/"+t)}}}]);var app=angular.module("WelcomeController",[]);app.controller("WelcomeCtrl",["$state","$scope","$http","$localStorage","$stateParams","WelcomeSrv",function(e,r,t,o,l,n){var a=this;a.name=o.currentUser.surname,a.ligues=o.currentUser.ligues,a.create=function(){e.go("create")},a.join=function(){e.go("join")}}]);var app=angular.module("WelcomeDirective",[]);app.directive("welcomeDirective",function(){return{restrict:"E",scope:{},templateUrl:"views/welcome/welcome.directive.html",controller:"WelcomeCtrl",controllerAs:"vm",bindToController:!0}}),angular.module("WelcomeService",[]).factory("WelcomeSrv",["$http","apiUrl",function(e,r){return{get:function(t){return e.get(r+"/users",t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnN0YW50LmpzIiwic3RhdGVzLmpzIiwiY3JlYXRlY2x1Yi9jcmVjbHViLmNvbnRyb2xsZXIuanMiLCJjcmVhdGVjbHViL2NyZWNsdWIuZGlyZWN0aXZlLmpzIiwiY3JlYXRlY2x1Yi9jcmVjbHViLnNlcnZpY2UuanMiLCJjcmVhdGVsZWFndWUvY3JlYXRlLmNvbnRyb2xsZXIuanMiLCJjcmVhdGVsZWFndWUvY3JlYXRlLmRpcmVjdGl2ZS5qcyIsImNyZWF0ZWxlYWd1ZS9jcmVhdGUuc2VydmljZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmRpcmVjdGl2ZS5qcyIsImpvaW5sZWFndWUvam9pbi5jb250cm9sbGVyLmpzIiwiam9pbmxlYWd1ZS9qb2luLmRpcmVjdGl2ZS5qcyIsImxvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJsb2dpbi9sb2dpbi5kaXJlY3RpdmUuanMiLCJsb2dpbi9sb2dpbi5zZXJ2aWNlLmpzIiwibWVudS9tZW51LmNvbnRyb2xsZXIuanMiLCJtZW51L21lbnUuZGlyZWN0aXZlLmpzIiwicGVyc28vcGVyc28uY29udHJvbGxlci5qcyIsInBlcnNvL3BlcnNvLmRpcmVjdGl2ZS5qcyIsInJlZ2lzdGVyL3JlZ2lzdGVyLmNvbnRyb2xsZXIuanMiLCJyZWdpc3Rlci9yZWdpc3Rlci5kaXJlY3RpdmUuanMiLCJyZWdpc3Rlci9yZWdpc3Rlci5zZXJ2aWNlLmpzIiwid2FpdC93YWl0LmNvbnRyb2xsZXIuanMiLCJ3YWl0L3dhaXQuZGlyZWN0aXZlLmpzIiwid2FpdC93YWl0LnNlcnZpY2UuanMiLCJ3ZWxjb21lL3dlbGNvbWUuY29udHJvbGxlci5qcyIsIndlbGNvbWUvd2VsY29tZS5kaXJlY3RpdmUuanMiLCJ3ZWxjb21lL3dlbGNvbWUuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJydW4iLCIkcm9vdFNjb3BlIiwiJGh0dHAiLCIkbG9jYXRpb24iLCIkbG9jYWxTdG9yYWdlIiwiY3VycmVudFVzZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJ0b2tlbiIsIiRpbmplY3QiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInJlcXVpcmVCYXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsImNvbnRyb2xsZXIiLCIkc3RhdGUiLCIkc2NvcGUiLCJDcmVjbHViU3J2IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJmYWN0b3J5IiwiYXBpVXJsIiwiQ3JlYXRlU3J2Iiwidm0iLCJ0aGlzIiwic2VsZWN0IiwibmIiLCJudW1iZXIiLCJ2YWxpZGF0ZSIsImRhdGEiLCJuYW1lIiwibGVhZ3VlIiwibmJQbGF5ZXJzIiwib3duZXIiLCJfaWQiLCJwbGF5ZXJOYW1lIiwicGxheWVyU3VybmFtZSIsInN1cm5hbWUiLCJjcmVhdGUiLCJ0aGVuIiwicmVzcG9uc2UiLCJsaWd1ZSIsImFkZCIsImdvIiwicG9zdCIsImlkIiwicmVnaXN0ZXIiLCJsb2dpbiIsIkxvZ2luU3J2IiwiZW1haWwiLCJwYXNzd29yZCIsInN1Y2Nlc3MiLCJlcnJvciIsIm1lc3NhZ2UiLCJ1c2VyIiwicmVzZXQiLCJwc2V1ZG8iLCJSZWdpc3RlclNydiIsIiRzdGF0ZVBhcmFtcyIsIldhaXRTcnYiLCJjdXJyZW50TGVhZ3VlIiwiZ2V0bGVhZ3VlIiwibGFjayIsInBhcnRpY2lwYW50cyIsImxlbmd0aCIsImdldCIsIldlbGNvbWVTcnYiLCJsaWd1ZXMiLCJqb2luIl0sIm1hcHBpbmdzIjoiQUFvQ0EsUUFBQUEsS0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQUEsRUFBQUMsY0FFQUgsRUFBQUksU0FBQUMsUUFBQUMsT0FBQSxjQUFBSixFQUFB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QUFRLEVBQUFYLEtBQUFrQyxhQUFBQyxRQUNBLFNBQUF4QixHQUNBakIsRUFBQWlCLFNBQUFBLE1DWkEsSUFBQTVDLEtBQUFDLFFBQUFDLE9BQUEsbUJBRUFGLEtBQUFtQixVQUFBLGdCQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBQyxTQUNBUixZQUFBLGlDQUNBRSxXQUFBLFdBQ0FPLGFBQUEsS0FDQUMsa0JBQUEsS0NUQXRCLFFBQUFDLE9BQUEsa0JBQUFzQixRQUFBLFdBQUEsUUFBQSxTQUFBLFNBQUFqQyxFQUFBa0MsR0FFQSxPQUNBd0MsVUFBQSxTQUFBaEMsR0FDQSxNQUFBMUMsR0FBQThFLElBQUE1QyxFQUFBLFdBQUFRLE9DSkEsSUFBQWpDLEtBQUFDLFFBQUFDLE9BQUEsdUJBRUFGLEtBQUFlLFdBQUEsZUFBQSxTQUFBLFNBQUEsUUFBQSxnQkFBQSxlQUFBLGFBQUEsU0FBQUMsRUFBQUMsRUFBQTFCLEVBQUFFLEVBQUFxRSxFQUFBUSxHQUVBLEdBQUEzQyxHQUFBQyxJQUVBRCxHQUFBTyxLQUFBekMsRUFBQUMsWUFBQStDLFFBRUFkLEVBQUE0QyxPQUFBOUUsRUFBQUMsWUFBQTZFLE9BRUE1QyxFQUFBZSxPQUFBLFdBQ0ExQixFQUFBK0IsR0FBQSxXQUdBcEIsRUFBQTZDLEtBQUEsV0FDQXhELEVBQUErQixHQUFBLFdDZkEsSUFBQS9DLEtBQUFDLFFBQUFDLE9BQUEsc0JBRUFGLEtBQUFtQixVQUFBLG1CQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBQyxTQUNBUixZQUFBLHVDQUNBRSxXQUFBLGNBQ0FPLGFBQUEsS0FDQUMsa0JBQUEsS0NUQXRCLFFBQUFDLE9BQUEscUJBQUFzQixRQUFBLGNBQUEsUUFBQSxTQUFBLFNBQUFqQyxFQUFBa0MsR0FFQSxPQUNBNEMsSUFBQSxTQUFBcEMsR0FDQSxNQUFBMUMsR0FBQThFLElBQUE1QyxFQUFBLFNBQUFRIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgndG9vZml4JywgW1xuICAgICd1aS5yb3V0ZXInLFxuICAgICduZ0FuaW1hdGUnLFxuICAgICd1aS5ib290c3RyYXAnLFxuICAgICdzdGF0ZXMnLFxuICAgICdIb21lQ29udHJvbGxlcicsXG4gICAgJ0hvbWVEaXJlY3RpdmUnLFxuICAgICdXZWxjb21lQ29udHJvbGxlcicsXG4gICAgJ1dlbGNvbWVEaXJlY3RpdmUnLFxuICAgICdXZWxjb21lU2VydmljZScsXG4gICAgJ0NyZWF0ZUNvbnRyb2xsZXInLFxuICAgICdDcmVhdGVEaXJlY3RpdmUnLFxuICAgICdDcmVhdGVTZXJ2aWNlJyxcbiAgICAnSm9pbkNvbnRyb2xsZXInLFxuICAgICdKb2luRGlyZWN0aXZlJyxcbiAgICAnQ3JlY2x1YkNvbnRyb2xsZXInLFxuICAgICdDcmVjbHViRGlyZWN0aXZlJyxcbiAgICAnQ3JlY2x1YlNlcnZpY2UnLFxuICAgICdQZXJzb0NvbnRyb2xsZXInLFxuICAgICdQZXJzb0RpcmVjdGl2ZScsXG4gICAgJ01lbnVDb250cm9sbGVyJyxcbiAgICAnTWVudURpcmVjdGl2ZScsXG4gICAgJ0xvZ2luQ29udHJvbGxlcicsXG4gICAgJ0xvZ2luRGlyZWN0aXZlJyxcbiAgICAnTG9naW5TZXJ2aWNlJyxcbiAgICAnUmVnaXN0ZXJDb250cm9sbGVyJyxcbiAgICAnUmVnaXN0ZXJEaXJlY3RpdmUnLFxuICAgICdSZWdpc3RlclNlcnZpY2UnLFxuICAgICdXYWl0Q29udHJvbGxlcicsXG4gICAgJ1dhaXREaXJlY3RpdmUnLFxuICAgICdXYWl0U2VydmljZScsXG4gICAgJ25nU3RvcmFnZScsXG4gICAgJ2NvbnN0YW50cycsXG5dKS5ydW4ocnVuKTtcblxuXG5mdW5jdGlvbiBydW4oJHJvb3RTY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgJGxvY2FsU3RvcmFnZSkge1xuICAgIFxuICAgIGlmICgkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKSB7XG5cdFxuICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlci50b2tlbjtcblx0XG4gICAgfVxuICAgIFxufVxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdjb25zdGFudHMnLFtdKSAgXG5cbmFwcC5jb25zdGFudCgnYXBpVXJsJywgJ2h0dHBzOi8vdG9vZml4LmdoZWJlcmcuZXUvYXBpJyk7XG5hcHAuY29uc3RhbnQoJ2xhbmd1YWdlcycsIFsnZnInXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnc3RhdGVzJywgW10pLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHJlcXVpcmVCYXNlOiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgXG5cdC5zdGF0ZSgnaG9tZScsIHtcblx0ICAgIHVybDogXCIvXCIsXG5cdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvaG9tZS9ob21lLmh0bWxcIlxuXHR9KVxuXG4gICAgLnN0YXRlKCdyZWdpc3RlcicsIHtcblx0ICAgIHVybDogXCIvcmVnaXN0ZXJcIixcblx0ICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sXCJcblx0fSlcblxuICAgIC5zdGF0ZSgnbG9naW4nLCB7XG5cdCAgICB1cmw6IFwiL2xvZ2luXCIsXG5cdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvbG9naW4vbG9naW4uaHRtbFwiXG5cdH0pXG4gICAgXG4gICAgLnN0YXRlKCd3ZWxjb21lJywge1xuXHQgICAgdXJsOiBcIi93ZWxjb21lXCIsXG5cdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3Mvd2VsY29tZS93ZWxjb21lLmh0bWxcIlxuXHR9KVxuXG5cdC5zdGF0ZSgnam9pbicsIHtcblx0XHR1cmw6IFwiL2pvaW5cIixcblx0ICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9qb2lubGVhZ3VlL2pvaW4uaHRtbFwiXG5cdH0pXG5cblx0LnN0YXRlKCdwZXJzbycsIHtcblx0XHR1cmw6IFwiL3BlcnNvXCIsXG5cdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvcGVyc28vcGVyc28uaHRtbFwiXG5cdH0pXG4gICAgXG5cdC5zdGF0ZShcIndhaXRcIiwge1xuXHRcdHVybDogXCIvd2FpdFwiLFxuXHQgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL3dhaXQvd2FpdC5odG1sXCJcblx0fSlcbiAgICBcblx0LnN0YXRlKCdjcmVjbHViJywge1xuXHRcdHVybDogXCIvY3JlY2x1YlwiLFxuXHQgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2NyZWF0ZWNsdWIvY3JlY2x1Yi5odG1sXCJcblx0fSlcblxuXHQuc3RhdGUoJ2NyZWF0ZScsIHtcblx0ICAgIHVybDogXCIvY3JlYXRlXCIsXG5cdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3MvY3JlYXRlbGVhZ3VlL2NyZWF0ZS5odG1sXCJcblx0fSk7XG5cbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvZXJyb3InKTtcbn0pOyBcbiIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQ3JlY2x1YkNvbnRyb2xsZXInLCBbXSk7XG5cbmFwcC5jb250cm9sbGVyKCdDcmVjbHViQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwgJHNjb3BlLCAkaHR0cCwgJGxvY2FsU3RvcmFnZSwgQ3JlY2x1YlNydikge1xuXG59KVxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdDcmVjbHViRGlyZWN0aXZlJywgW10pO1xuXG5hcHAuZGlyZWN0aXZlKCdjcmVjbHViRGlyZWN0aXZlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuXHRyZXN0cmljdDogJ0UnLFxuXHRzY29wZToge30sXG5cdHRlbXBsYXRlVXJsOiBcInZpZXdzL2NyZWF0ZWNsdWIvY3JlY2x1Yi5kaXJlY3RpdmUuaHRtbFwiLFxuXHRjb250cm9sbGVyOiBcIkNyZWNsdWJDdHJsXCIsXG5cdGNvbnRyb2xsZXJBczogXCJ2bVwiLFxuXHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0NyZWNsdWJTZXJ2aWNlJywgW10pLmZhY3RvcnkoJ0NyZWNsdWJTcnYnLCBbJyRodHRwJywgJ2FwaVVybCcsIGZ1bmN0aW9uKCRodHRwLCBhcGlVcmwpIHtcblxuICAgIHJldHVybiB7XG4gICAgXHRcbiAgICB9O1xufV0pO1xuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdDcmVhdGVDb250cm9sbGVyJywgW10pO1xuXG5hcHAuY29udHJvbGxlcignQ3JlYXRlQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwgJGh0dHAsICAkbG9jYWxTdG9yYWdlLCBDcmVhdGVTcnYpIHtcblxuICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICB2bS5zZWxlY3QgPSBmdW5jdGlvbiAobmIpIHtcbiAgXHRcdHZtLm51bWJlciA9IG5iO1xuICAgIH07XG5cbiAgICB2bS52YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIFx0dmFyIGRhdGEgPSB7XG4gICAgXHRcdG5hbWU6IHZtLmxlYWd1ZSxcbiAgICBcdFx0bmJQbGF5ZXJzOiB2bS5udW1iZXIsXG4gICAgXHRcdG93bmVyOiAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLl9pZCxcbiAgICBcdFx0cGxheWVyTmFtZTogJGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlci5uYW1lLFxuICAgIFx0XHRwbGF5ZXJTdXJuYW1lOiAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLnN1cm5hbWVcbiAgICBcdH07XG4gICAgICBcdENyZWF0ZVNydi5jcmVhdGUoZGF0YSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0ICAgIHZtLnJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdFx0XHQgICAgdmFyIGxpZ3VlID0ge1xuXHRcdFx0ICAgIFx0X2lkIDogcmVzcG9uc2UuZGF0YS5faWQsXG5cdFx0XHQgICAgXHRuYW1lIDogZGF0YS5uYW1lXG4gICAgICAgICAgfTtcbiAgICAgICAgICAgIENyZWF0ZVNydi5hZGQoZGF0YS5vd25lciwgbGlndWUpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3dlbGNvbWUnKTtcbiAgICAgICAgICAgICAgfSxmdW5jdGlvbihyZXNwb25zZSkgeyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sZnVuY3Rpb24ocmVzcG9uc2UpIHtcblxuICAgICAgICB9KTtcbiAgICB9XG5cbn0pXG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0NyZWF0ZURpcmVjdGl2ZScsIFtdKTtcblxuYXBwLmRpcmVjdGl2ZSgnY3JlYXRlRGlyZWN0aXZlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuXHRyZXN0cmljdDogJ0UnLFxuXHRzY29wZToge30sXG5cdHRlbXBsYXRlVXJsOiBcInZpZXdzL2NyZWF0ZWxlYWd1ZS9jcmVhdGUuZGlyZWN0aXZlLmh0bWxcIixcblx0Y29udHJvbGxlcjogXCJDcmVhdGVDdHJsXCIsXG5cdGNvbnRyb2xsZXJBczogXCJ2bVwiLFxuXHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0NyZWF0ZVNlcnZpY2UnLCBbXSkuZmFjdG9yeSgnQ3JlYXRlU3J2JywgWyckaHR0cCcsICdhcGlVcmwnLCBmdW5jdGlvbigkaHR0cCwgYXBpVXJsKSB7XG5cbiAgICByZXR1cm4ge1xuXHRcdGNyZWF0ZSA6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHQgICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVXJsICsgJy9saWd1ZXMnLCBkYXRhKTtcblx0XHR9LFxuXHRcdGFkZCA6IGZ1bmN0aW9uKGlkICxkYXRhKcKge1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoYXBpVXJsICsgJy91c2Vycy8nICsgaWQgKyAnL2xpZ3VlcycsIGRhdGEpO1xuXHRcdH1cbiAgICB9O1xufV0pO1xuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdIb21lQ29udHJvbGxlcicsIFtdKTtcblxuYXBwLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgZnVuY3Rpb24oJHN0YXRlKSB7XG5cbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgdm0ucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCRzdGF0ZS5nbygncmVnaXN0ZXInKTtcbiAgICB9XG4gICAgXG4gICAgdm0ubG9naW4gPSBmdW5jdGlvbiAoKSB7XG5cdCRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICB9XG59KVxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdIb21lRGlyZWN0aXZlJywgW10pO1xuXG5hcHAuZGlyZWN0aXZlKCdob21lRGlyZWN0aXZlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuXHRyZXN0cmljdDogJ0UnLFxuXHRzY29wZToge30sXG5cdHRlbXBsYXRlVXJsOiBcInZpZXdzL2hvbWUvaG9tZS5kaXJlY3RpdmUuaHRtbFwiLFxuXHRjb250cm9sbGVyOiBcIkhvbWVDdHJsXCIsXG5cdGNvbnRyb2xsZXJBczogXCJ2bVwiLFxuXHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcbn0pO1xuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdKb2luQ29udHJvbGxlcicsIFtdKTtcblxuYXBwLmNvbnRyb2xsZXIoJ0pvaW5DdHJsJywgZnVuY3Rpb24oJHN0YXRlKSB7XG5cbiAgICB2YXIgdm0gPSB0aGlzO1xuXG59KVxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdKb2luRGlyZWN0aXZlJywgW10pO1xuXG5hcHAuZGlyZWN0aXZlKCdqb2luRGlyZWN0aXZlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuXHRyZXN0cmljdDogJ0UnLFxuXHRzY29wZToge30sXG5cdHRlbXBsYXRlVXJsOiBcInZpZXdzL2pvaW5sZWFndWUvam9pbi5kaXJlY3RpdmUuaHRtbFwiLFxuXHRjb250cm9sbGVyOiBcIkpvaW5DdHJsXCIsXG5cdGNvbnRyb2xsZXJBczogXCJ2bVwiLFxuXHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcbn0pO1xuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdMb2dpbkNvbnRyb2xsZXInLCBbXSk7XG5cbmFwcC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbigkc3RhdGUsICRzY29wZSwgJGh0dHAsICRsb2NhbFN0b3JhZ2UsTG9naW5TcnYpIHtcblxuICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICB2bS52YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2bS5kYXRhID0ge1xuXHQgICAgXHQnZW1haWwnOiB2bS5lbWFpbCxcblx0ICAgIFx0J3Bhc3N3b3JkJzogdm0ucGFzc3dvcmRcblx0XHR9O1xuXHRcblx0XHRMb2dpblNydi5wb3N0KHZtLmRhdGEpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHQgICAgdm0ucmVzcG9uc2UgPSByZXNwb25zZTtcblxuXHRcdCAgICBpZihyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XG5cdFx0XHRcdHZtLmVycm9yID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlO1xuXHRcdCAgICB9XG5cdFx0ICAgIGVsc2Uge1xuXHRcdFx0XG5cdFx0XHQkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gcmVzcG9uc2UuZGF0YS50b2tlbjtcblx0XHRcdCRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7XG5cdFx0XHQkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLnRva2VuID0gcmVzcG9uc2UuZGF0YS50b2tlbjtcblx0XHQgICAgJHN0YXRlLmdvKCd3ZWxjb21lJyk7XG5cdFx0ICAgIH1cblx0XHQgICAgXG5cdFx0fSxmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdCAgICAvL0ZvbmN0aW9uIMOgIGNvbXBsw6l0ZXIgcXVhbmQgbGEgcmVxdcOqdGUgcmVudmVycmEgdW4gY29kZSBlcnJldXIgR0cgZmVsaXg7XG5cdFx0fSk7XG5cblx0XG4gICAgfTtcblxuICAgIHZtLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuXHQkc3RhdGUuZ28oJ3JlZ2lzdGVyJyk7XG4gICAgfVxuICAgIFxuICAgIHZtLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG5cdCRzdGF0ZS5nbygncmVzZXQnKTtcbiAgICB9XG59KVxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdMb2dpbkRpcmVjdGl2ZScsIFtdKTtcblxuYXBwLmRpcmVjdGl2ZSgnbG9naW5EaXJlY3RpdmUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG5cdHJlc3RyaWN0OiAnRScsXG5cdHNjb3BlOiB7fSxcblx0dGVtcGxhdGVVcmw6IFwidmlld3MvbG9naW4vbG9naW4uZGlyZWN0aXZlLmh0bWxcIixcblx0Y29udHJvbGxlcjogXCJMb2dpbkN0cmxcIixcblx0Y29udHJvbGxlckFzOiBcInZtXCIsXG5cdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnTG9naW5TZXJ2aWNlJywgW10pLmZhY3RvcnkoJ0xvZ2luU3J2JywgWyckaHR0cCcsICdhcGlVcmwnLCBmdW5jdGlvbigkaHR0cCwgYXBpVXJsKSB7XG5cbiAgICByZXR1cm4ge1xuXHRcdHBvc3QgOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0ICAgIHJldHVybiAkaHR0cC5wb3N0KGFwaVVybCArICcvYXV0aGVudGlmaWNhdGUnLCBkYXRhKTtcblx0XHR9LFxuICAgIH07XG59XSk7XG5cbiIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnTWVudUNvbnRyb2xsZXInLCBbXSk7XG5cbmFwcC5jb250cm9sbGVyKCdNZW51Q3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwgJHNjb3BlKSB7XG5cbiAgICB2YXIgdm0gPSB0aGlzO1xuXG59KVxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdNZW51RGlyZWN0aXZlJywgW10pO1xuXG5hcHAuZGlyZWN0aXZlKCdtZW51RGlyZWN0aXZlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuXHRyZXN0cmljdDogJ0UnLFxuXHRzY29wZToge30sXG5cdHRlbXBsYXRlVXJsOiBcInZpZXdzL21lbnUvbWVudS5kaXJlY3RpdmUuaHRtbFwiLFxuXHRjb250cm9sbGVyOiBcIk1lbnVDdHJsXCIsXG5cdGNvbnRyb2xsZXJBczogXCJ2bVwiLFxuXHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG4gICAgfTtcbn0pO1xuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdQZXJzb0NvbnRyb2xsZXInLCBbXSk7XG5cbmFwcC5jb250cm9sbGVyKCdQZXJzb0N0cmwnLCBmdW5jdGlvbigkc3RhdGUsICRzY29wZSwgJGh0dHAsICRsb2NhbFN0b3JhZ2UpIHtcblxuXHR2bSA9IHRoaXM7XG5cblx0dm0ubmFtZSA9ICRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIubmFtZTtcblx0dm0uc3VybmFtZSA9ICRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIuc3VybmFtZTtcblx0dm0uZW1haWwgPSAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLmVtYWlsO1xuXHR2bS5wc2V1ZG8gPSAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLnBzZXVkbztcbn0pXG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ1BlcnNvRGlyZWN0aXZlJywgW10pO1xuXG5hcHAuZGlyZWN0aXZlKCdwZXJzb0RpcmVjdGl2ZScsIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcblx0cmVzdHJpY3Q6ICdFJyxcblx0c2NvcGU6IHt9LFxuXHR0ZW1wbGF0ZVVybDogXCJ2aWV3cy9wZXJzby9wZXJzby5kaXJlY3RpdmUuaHRtbFwiLFxuXHRjb250cm9sbGVyOiBcIlBlcnNvQ3RybFwiLFxuXHRjb250cm9sbGVyQXM6IFwidm1cIixcblx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG59KTtcbiIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnUmVnaXN0ZXJDb250cm9sbGVyJywgW10pO1xuXG5hcHAuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgZnVuY3Rpb24oJHN0YXRlLCAkc2NvcGUsIFJlZ2lzdGVyU3J2KSB7XG5cbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgXG5cbiAgICB2bS52YWxpZGF0ZSA9IGZ1bmN0aW9uKCl7XG5cblx0dm0uZGF0YSA9IHtcbiAgICBcdCAgICAnc3VybmFtZSc6IHZtLnN1cm5hbWUsXG4gICAgXHQgICAgJ25hbWUnOiB2bS5uYW1lLFxuICAgIFx0ICAgICdlbWFpbCc6IHZtLmVtYWlsLFxuICAgIFx0ICAgICdwYXNzd29yZCc6IHZtLnBhc3N3b3JkXG5cdH07XHRcblxuICAgIFx0UmVnaXN0ZXJTcnYucG9zdCh2bS5kYXRhKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdCAgICB2bS5yZXNwb25zZSA9IHJlc3BvbnNlO1xuXG5cdH0sZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0ICAgIHZtLmVycm9yID0gcmVzcG9uc2U7XG5cdH0pO1xuXG5cdFxuICAgIH07XG59KVxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdSZWdpc3RlckRpcmVjdGl2ZScsIFtdKTtcblxuYXBwLmRpcmVjdGl2ZSgncmVnaXN0ZXJEaXJlY3RpdmUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG5cdHJlc3RyaWN0OiAnRScsXG5cdHNjb3BlOiB7fSxcblx0dGVtcGxhdGVVcmw6IFwidmlld3MvcmVnaXN0ZXIvcmVnaXN0ZXIuZGlyZWN0aXZlLmh0bWxcIixcblx0Y29udHJvbGxlcjogXCJSZWdpc3RlckN0cmxcIixcblx0Y29udHJvbGxlckFzOiBcInZtXCIsXG5cdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnUmVnaXN0ZXJTZXJ2aWNlJywgW10pLmZhY3RvcnkoJ1JlZ2lzdGVyU3J2JywgWyckaHR0cCcsICdhcGlVcmwnLCBmdW5jdGlvbigkaHR0cCwgYXBpVXJsKSB7XG5cbiAgICByZXR1cm4ge1xuXHRwb3N0IDogZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVXJsICsgJy91c2Vycy8nLCBkYXRhKTtcblx0fSxcbiAgICB9O1xufV0pO1xuXG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ1dhaXRDb250cm9sbGVyJywgW10pO1xuXG5hcHAuY29udHJvbGxlcignV2FpdEN0cmwnLCBmdW5jdGlvbigkc3RhdGUsICRzY29wZSwgJGh0dHAsICRzdGF0ZVBhcmFtcywgJGxvY2FsU3RvcmFnZSwgV2FpdFNydikge1xuXG4gICAgdmFyIHZtID0gdGhpcztcblxuICAgIHZtLmxlYWd1ZSA9ICRsb2NhbFN0b3JhZ2UuY3VycmVudExlYWd1ZTtcbiAgICBcbiAgICBXYWl0U3J2LmdldGxlYWd1ZSh2bS5sZWFndWUuaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICBcdHZtLnJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdCAgICB2bS5sYWNrID0gcmVzcG9uc2UuZGF0YS5uYlBsYXllcnMgLSByZXNwb25zZS5kYXRhLnBhcnRpY2lwYW50cy5sZW5ndGg7XG4gICAgfSxmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIFx0dm0ucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB9KTtcbn0pXG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ1dhaXREaXJlY3RpdmUnLCBbXSk7XG5cbmFwcC5kaXJlY3RpdmUoJ3dhaXREaXJlY3RpdmUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG5cdHJlc3RyaWN0OiAnRScsXG5cdHNjb3BlOiB7fSxcblx0dGVtcGxhdGVVcmw6IFwidmlld3Mvd2FpdC93YWl0LmRpcmVjdGl2ZS5odG1sXCIsXG5cdGNvbnRyb2xsZXI6IFwiV2FpdEN0cmxcIixcblx0Y29udHJvbGxlckFzOiBcInZtXCIsXG5cdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbiAgICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnV2FpdFNlcnZpY2UnLCBbXSkuZmFjdG9yeSgnV2FpdFNydicsIFsnJGh0dHAnLCAnYXBpVXJsJywgZnVuY3Rpb24oJGh0dHAsIGFwaVVybCkge1xuXG4gICAgcmV0dXJuIHtcblx0XHRnZXRsZWFndWUgOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0ICAgIHJldHVybiAkaHR0cC5nZXQoYXBpVXJsICsgJy9saWd1ZXMvJyArIGRhdGEpO1xuXHRcdH0sXG4gICAgfTtcbn1dKTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ1dlbGNvbWVDb250cm9sbGVyJywgW10pO1xuXG5hcHAuY29udHJvbGxlcignV2VsY29tZUN0cmwnLCBmdW5jdGlvbigkc3RhdGUsICRzY29wZSwgJGh0dHAsICRsb2NhbFN0b3JhZ2UsICRzdGF0ZVBhcmFtcywgV2VsY29tZVNydikge1xuXG4gICAgdmFyIHZtID0gdGhpcztcblxuICAgIHZtLm5hbWUgPSAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLnN1cm5hbWU7XG5cbiAgICB2bS5saWd1ZXMgPSAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLmxpZ3VlcztcblxuICAgIHZtLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0JHN0YXRlLmdvKCdjcmVhdGUnKTtcbiAgICB9O1xuXG4gICAgdm0uam9pbiA9IGZ1bmN0aW9uICgpIHtcblx0JHN0YXRlLmdvKCdqb2luJyk7XG4gICAgfTtcblxufSlcbiIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnV2VsY29tZURpcmVjdGl2ZScsIFtdKTtcblxuYXBwLmRpcmVjdGl2ZSgnd2VsY29tZURpcmVjdGl2ZScsIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcblx0cmVzdHJpY3Q6ICdFJyxcblx0c2NvcGU6IHt9LFxuXHR0ZW1wbGF0ZVVybDogXCJ2aWV3cy93ZWxjb21lL3dlbGNvbWUuZGlyZWN0aXZlLmh0bWxcIixcblx0Y29udHJvbGxlcjogXCJXZWxjb21lQ3RybFwiLFxuXHRjb250cm9sbGVyQXM6IFwidm1cIixcblx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdXZWxjb21lU2VydmljZScsIFtdKS5mYWN0b3J5KCdXZWxjb21lU3J2JywgWyckaHR0cCcsICdhcGlVcmwnLCBmdW5jdGlvbigkaHR0cCwgYXBpVXJsKSB7XG5cbiAgICByZXR1cm4ge1xuXHRcdGdldCA6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHQgICAgcmV0dXJuICRodHRwLmdldChhcGlVcmwgKyAnL3VzZXJzJywgZGF0YSk7XG5cdFx0fSxcbiAgICB9O1xufV0pOyJdfQ==
